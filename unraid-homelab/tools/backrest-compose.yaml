services:
  backrest:
    container_name: backrest
    hostname: unraid-backrest
    image: ghcr.io/garethgeorge/backrest:v1.11.2@sha256:6ecf25925dafcb6b37ab871d23c1d424a6f5008191a631c0b520641ec22a3f84
    labels:
      folder.view2: Tools
      net.unraid.docker.icon: ${SECRET_APPDATA}/icons/backrest.png
    ports:
      - "192.168.1.12:9898:9898"
    volumes:
      # Backrest app folders
      - ${SECRET_APPDATA}/backrest/data:/data
      - ${SECRET_APPDATA}/backrest/config:/config
      - ${SECRET_APPDATA}/backrest/cache:/cache
      # Backrest Unraid backup folders
      - /mnt:/mnt:rw,rslave
    environment:
      TZ: ${TZ}
      BACKREST_DATA: /data
      BACKREST_CONFIG: /config/config.json
      XDG_CACHE_HOME: /cache
    networks:
      - backrest
    restart: always

networks:
  backrest:
