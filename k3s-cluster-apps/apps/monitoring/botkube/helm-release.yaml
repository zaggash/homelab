apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: botkube
spec:
  chart:
    spec:
      interval: 5m
      chart: botkube
      version: "0.17.0"
      sourceRef:
        kind: HelmRepository
        name: botkube-charts
        namespace: flux-system
  interval: 5m
  install:
    crds: Create
  maxHistory: 3
  upgrade:
    crds: CreateReplace
  values:
    communications:
      default-group:
        discord:
          enabled: true
          botID: ${SECRET_BOTKUBE_DISCORD_BOT_ID}
          token: ${SECRET_BOTKUBE_DISCORD_TOKEN}
          channels:
            default:
              id: ${SECRET_BOTKUBE_DISCORD_CHANNEL_ID}
    settings:
      clusterName: "HomeLab"
      upgradeNotifier: false
    executors:
      'kubectl-read-only':
        kubectl:
          enabled: true
    analytics:
      disable: true
